{% extends 'layouts/' ~ data.layout ~ '.html.twig' %}

{% block title %}User index{% endblock %}

{% block main %}
    <div class="container">
        <div class="d-flex flex-wrap justify-content-between gap-3 mb-3">
            <a class="btn btn-secondary text-nowrap" href="{{ path('app_back') }}"><i class="bi bi-arrow-return-left me-1"></i> back to dashboard</a>
            <div class="d-flex gap-2">
                <span class="btn btn-outline-dark disabled text-nowrap">countUser: {{ countUser }}</span>
                <a class="btn btn-success text-nowrap" href="{{ path('app_user_new') }}">create new <i class="bi bi-plus-circle ms-1"></i></a>
            </div>
        </div>
        <div class="overflow-auto border rounded">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Email</th>
                        <th>Roles</th>
                        {# <th>Password</th> #}
                        {# <th>CreatedAt</th> #}
                        <th>UpdatedAt</th>
                        <th>actions</th>
                    </tr>
                </thead>
                <tbody>
                {% for user in users %}
                    <tr>
                        <td>{{ user.id }}</td>
                        <td>{{ user.email }}</td>
                        <td>{{ user.roles ? user.roles|json_encode : '' }}</td>
                        {# <td>{{ user.password }}</td> #}
                        {# <td>{{ user.createdAt ? user.createdAt|date('Y-m-d H:i:s') : '' }}</td> #}
                        <td>{{ user.updatedAt ? user.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
                        <td>
                            <a class="text-decoration-none text-secondary mx-1" href="{{ path('app_user_show', {'id': user.id}) }}">show <i class="bi bi-eye"></i></a>
                            <a class="text-decoration-none mx-1" href="{{ path('app_user_edit', {'id': user.id}) }}">edit <i class="bi bi-pencil"></i></a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="7">no records found</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
